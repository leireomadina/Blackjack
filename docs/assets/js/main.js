"use strict";const btnNew=document.querySelector(".js-new-button"),btnAsk=document.querySelector(".js-ask-button"),btnStop=document.querySelector(".js-stop-button"),htmlPoints=document.querySelectorAll(".js-players-points"),divPlayersCards=document.querySelectorAll(".cards-container");let deck=[],shuffledDeck=[],playerPoints=0,computerPoints=0;const cardTypes=["C","D","H","S"],specialCards=["J","Q","K","A"],shuffleDeck=e=>{let t=e.length;for(;t>0;){let s=Math.floor(Math.random()*t);t--;let n=e[t];e[t]=e[s],e[s]=n}return e},createDeck=()=>{deck=[];for(let e of cardTypes){for(let t=2;t<=10;t++)deck.push(t+e);for(let t of specialCards)deck.push(t+e)}return shuffledDeck=shuffleDeck(deck),shuffledDeck};createDeck();const askCard=()=>{0===shuffledDeck.length&&alert("There are no more cards on the deck :(");return shuffledDeck.pop()},calculateCardValue=e=>{const t=e.substring(0,e.length-1);let s=0;return s=isNaN(t)?"A"===t?11:10:parseInt(t),s},playersTurn=()=>{const e=askCard();playerPoints+=calculateCardValue(e),htmlPoints[0].innerText=playerPoints+" points";const t=document.createElement("img");t.src=`./assets/images/cards/${e}.png`,t.classList.add("card"),divPlayersCards[0].append(t),playerPoints>21?(console.warn("Im so sorry, you lost. But keep trying!"),btnAsk.disabled=!0,btnStop.disabled=!0,computersTurn(playerPoints)):21===playerPoints&&(console.warn("Wow 21 points! You win this time :)"),btnAsk.disabled=!0,btnStop.disabled=!0,computersTurn(playerPoints))},handleFinishTurn=()=>{btnAsk.disabled=!0,btnStop.disabled=!0,computersTurn(playerPoints)},computersTurn=e=>{do{const t=askCard();computerPoints+=calculateCardValue(t),htmlPoints[1].innerText=computerPoints+" points";const s=document.createElement("img");if(s.src=`./assets/images/cards/${t}.png`,s.classList.add("card"),divPlayersCards[1].append(s),e>21)break}while(computerPoints<e&&e<=21);setTimeout(()=>{computerPoints===e?alert("No one wins :("):e>21?alert("Computer wins"):computerPoints>21?alert("You win! :D"):alert("Computer wins")},100)},startNewGame=()=>{deck=createDeck(),playerPoints=0,computerPoints=0,htmlPoints[0].innerText=0,htmlPoints[1].innerText=0,divPlayersCards[1].innerHTML="",divPlayersCards[0].innerHTML="",btnAsk.disabled=!1,btnStop.disabled=!1};btnAsk.addEventListener("click",playersTurn),btnStop.addEventListener("click",handleFinishTurn),btnNew.addEventListener("click",startNewGame);