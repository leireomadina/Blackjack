const myModule=(()=>{"use strict";const e=document.querySelector(".js-new-button"),t=document.querySelector(".js-ask-button"),s=document.querySelector(".js-stop-button"),n=document.querySelector(".js-instructions-btn"),r=document.querySelector(".js-modal-btn"),o=document.querySelectorAll(".js-players-points"),l=document.querySelectorAll(".cards-container"),i=document.querySelector(".instructions__container"),c=document.querySelectorAll(".js-players-counter"),d=document.querySelector(".js-modal"),a=document.querySelector(".js-modal-image"),u=document.querySelector(".js-modal-title");let m=[],h=[],b=[],g=[0,0];const p=["C","D","H","S"],L=["J","Q","K","A"],y=()=>{i.classList.contains("collapsed")?n.innerHTML="Show instructions":n.innerHTML="Hide instructions"},S=()=>{((e=2)=>{b=[];for(let t=0;t<e;t++)b.push(0)})(),m=f(),o.forEach(e=>e.innerText="Points: 0"),l.forEach(e=>e.innerHTML=""),E()},f=()=>{m=[];for(let e of p){for(let t=2;t<=10;t++)m.push(t+e);for(let t of L)m.push(t+e)}return h=(e=>{let t=e.length;for(;t>0;){let s=Math.floor(Math.random()*t);t--;let n=e[t];e[t]=e[s],e[s]=n}return e})(m),h},j=(e,t)=>{const s=document.createElement("img");s.src=`./assets/images/cards/${e}.png`,s.classList.add("card"),l[t].append(s)},q=()=>{y(),0===h.length&&alert("There are no more cards on the deck :(");return h.pop()},w=(e,t)=>(b[t]=b[t]+(e=>{const t=e.substring(0,e.length-1);let s=0;return s=isNaN(t)?"A"===t?11:10:parseInt(t),s})(e),o[t].innerText="Points: "+b[t],b[t]),T=()=>{t.disabled=!0,s.disabled=!0,t.classList.add("btn-disabled"),s.classList.add("btn-disabled")},E=()=>{t.disabled=!1,s.disabled=!1,t.classList.remove("btn-disabled"),s.classList.remove("btn-disabled")},k=e=>{let t=0;do{const s=q();if(t=w(s,b.length-1),j(s,b.length-1),e>21)break}while(t<e&&e<=21);v()},v=()=>{const[e,t]=b;setTimeout(()=>{t===e?alert("No one wins this round :("):e>21?(alert("Bender wins this round"),x(1)):t>21?(alert("You win this round!"),x(0)):(alert("Bender wins this round"),x(1)),M()},100),T()},x=e=>{g[e]++,c[e].innerText="Wins: "+g[e]},M=()=>{console.log(g),5===g[0]?(u.innerText="You win this time",a.src="./assets/images/bender-losses.jpg"):5===g[1]&&(u.innerText="Bender wins",a.src="./assets/images/bender-wins.jpg"),5!==g[0]&&5!==g[1]||(d.classList.toggle("hidden"),g=[0,0],c.forEach(e=>e.innerText="Wins: 0"))};return t.addEventListener("click",()=>{const e=q(),t=w(e,0);j(e,0),(t>21||21===t)&&(T(),k(t))}),s.addEventListener("click",()=>{T(),k(b[0])}),e.addEventListener("click",S),n.addEventListener("click",()=>{i.classList.toggle("collapsed"),y()}),r.addEventListener("click",()=>{d.classList.toggle("hidden"),S()}),{newGame:S}})();